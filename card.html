<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIOR Card - Digital Greeting</title>
    
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;800&family=Plus+Jakarta+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <!-- ===============================
    CSS TIDAK DIUBAH (ASLI DARI MAS)
    =============================== -->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        .theme-birthday { --primary: #1e3a5f; --accent: #d4af37; --gradient: linear-gradient(145deg, #1e3a5f, #2b4c73); --bg: #fff9f0; }
        .theme-valentine { --primary: #b76e79; --accent: #ffb6c1; --gradient: linear-gradient(145deg, #b76e79, #c98b95); --bg: #fff5f8; }
        .theme-wedding { --primary: #b2ac88; --accent: #e6d5b8; --gradient: linear-gradient(145deg, #b2ac88, #c5bf9c); --bg: #fffcf9; }
        .theme-anniversary { --primary: #9c89b8; --accent: #e0b0b5; --gradient: linear-gradient(145deg, #9c89b8, #b39bc0); --bg: #fbf5ff; }
        .theme-graduation { --primary: #6b8c5e; --accent: #c5b783; --gradient: linear-gradient(145deg, #6b8c5e, #86a075); --bg: #f7fcf5; }
        .theme-condolence { --primary: #6b705c; --accent: #b7b7a4; --gradient: linear-gradient(145deg, #6b705c, #848875); --bg: #fbfaf8; }
        .theme-congratulation { --primary: #ff7f50; --accent: #ffb347; --gradient: linear-gradient(145deg, #ff7f50, #ff9f4b); --bg: #fff5ed; }
        .theme-imlek { --primary: #d32f2f; --accent: #ffb300; --gradient: linear-gradient(145deg, #d32f2f, #b71c1c); --bg: #fff8e1; }
        .theme-natal { --primary: #c41e3a; --accent: #2e7d32; --gradient: linear-gradient(145deg, #c41e3a, #a51d36); --bg: #e8f5e9; }
        .theme-lebaran { --primary: #1b5e20; --accent: #ff8f00; --gradient: linear-gradient(145deg, #1b5e20, #2e7d32); --bg: #fff3e0; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--bg);
            color: #2d3e4f;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
        }

        .mobile-container { max-width: 450px; width: 100%; }

        .card {
            background: white;
            border-radius: 32px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            animation: slideUp 0.5s ease;
            position: relative;
        }
        .card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 6px;
            background: var(--gradient);
            z-index: 2;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-header {
            background: var(--gradient);
            padding: 40px 20px 48px;
            text-align: center;
            position: relative;
        }

        .theme-emoji { font-size: 64px; margin-bottom: 8px; }

        .greeting {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 800;
            color: white;
        }

        .recipient-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
        }

        .card-body { padding: 32px 20px; }

        .message {
            font-size: 1rem;
            line-height: 1.7;
            text-align: center;
            font-style: italic;
        }
    </style>
</head>

<body class="theme-birthday">

<div class="mobile-container">
    <div class="card">
        <div class="card-header">
            <div class="theme-emoji" id="themeEmoji">üéÇ</div>
            <div class="greeting" id="greetingText">Happy Birthday</div>
            <div class="recipient-name" id="recipientName">[Nama Penerima]</div>
        </div>

        <div class="card-body">
            <div class="message" id="messageText">Memuat pesan...</div>
        </div>
    </div>
</div>

<script>
const CONFIG = {
    SCRIPT_URL: "https://script.google.com/macros/s/AKfycbzTPgv-D6VNNlh0QHERaizfzN4tWCs42Xdr3sZLdpIzs3oHQAuz5D-6tqfO5U7E2QHmEw/exec"
};

const THEMES = {
    birthday: { emoji: 'üéÇ', greeting: 'Happy Birthday' },
    valentine: { emoji: '‚ù§Ô∏è', greeting: 'Happy Valentine' },
    wedding: { emoji: 'üíç', greeting: 'Congratulations' }
};

function getParams() {
    const p = new URLSearchParams(location.search);
    return {
        to: p.get('to') || 'Sahabat',
        theme: p.get('theme') || 'birthday',
        id: p.get('v')
    };
}

async function fetchMessage(id) {
    const res = await fetch(`${CONFIG.SCRIPT_URL}?cmd=get&id=${id}`);
    return res.json();
}

async function init() {
    const params = getParams();

    document.getElementById("recipientName").textContent = params.to;

    const theme = THEMES[params.theme];
    if (theme) {
        document.body.className = `theme-${params.theme}`;
        document.getElementById("themeEmoji").textContent = theme.emoji;
        document.getElementById("greetingText").textContent = theme.greeting;
    }

    if (params.id) {
        const data = await fetchMessage(params.id);
        if (data.status === "success") {
            document.getElementById("messageText").textContent = data.message;
        } else {
            document.getElementById("messageText").textContent = "Pesan tidak ditemukan.";
        }
    }
}

init();
</script>

</body>
</html>
