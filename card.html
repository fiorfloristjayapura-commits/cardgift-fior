<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kartu Ucapan FIOR</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    text-align: center;
    padding: 30px;
}

.card {
    max-width: 500px;
    margin: auto;
    background: white;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

h1 {
    margin-bottom: 10px;
}

.media img,
.media video {
    max-width: 100%;
    border-radius: 10px;
    margin-top: 20px;
}
</style>
</head>

<body>
<div class="card">
    <h1 id="greeting"></h1>
    <h2 id="to"></h2>
    <p id="msg"></p>
    <div class="media" id="media"></div>
</div>

<script>
function getParams() {
    const p = new URLSearchParams(location.search);
    return {
        to: p.get("to"),
        msg: p.get("msg"),
        theme: p.get("theme"),
        media: p.get("media")
    };
}

function cleanDriveUrl(url) {
    if (!url) return "";
    const match = url.match(/id=([^&]+)/);
    if (match) {
        return `https://drive.google.com/uc?id=${match[1]}`;
    }
    return url;
}

function detectType(url) {
    const u = url.toLowerCase();
    if (u.includes(".jpg") || u.includes(".png") || u.includes(".jpeg") || u.includes(".webp")) {
        return "image";
    }
    return "video";
}

function init() {
    const data = getParams();

    document.getElementById("greeting").innerText =
        "Greetings from FIOR Florist";

    document.getElementById("to").innerText =
        "Kepada: " + data.to;

    document.getElementById("msg").innerText =
        data.msg;

    if (data.media) {
        const url = cleanDriveUrl(data.media);
        const type = detectType(url);
        const container = document.getElementById("media");

        if (type === "image") {
            container.innerHTML = `<img src="${url}">`;
        } else {
            container.innerHTML = `
                <video controls>
                    <source src="${url}" type="video/mp4">
                </video>`;
        }
    }
}

init();
</script>
</body>
</html>
